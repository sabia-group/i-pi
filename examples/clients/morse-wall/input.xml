<simulation verbosity='high'>

  <output prefix='simulation'>
    <properties stride='1' filename='out'>  [ step, time{picosecond}, conserved{electronvolt}, kinetic_md{electronvolt}, potential{electronvolt}, temperature{kelvin} ] </properties>
    <trajectory filename='pos' stride='1' format='ase'> positions </trajectory>
  </output>

  <total_steps>100</total_steps>

  <prng>
    <seed>31415</seed>
  </prng>

  <ffsocket name='qtip4pf' mode='unix' pbc='false'>
      <address>qtip4pf</address>
  </ffsocket>

   <ffdirect name='wall-1' >
    <pes> confining </pes>
    <parameters> {template:start.extxyz,instructions:instructions.wall-1.json,mode:morse-wall} </parameters>
  </ffdirect>

  <ffdirect name='wall-2' >
    <pes> confining </pes>
    <parameters> {template:start.extxyz,instructions:instructions.wall-2.json,mode:morse-wall} </parameters>
  </ffdirect>

  <system>

    <initialize nbeads='1'>
      <file mode='ase'> start.extxyz </file>
      <velocities mode='thermal' units='kelvin'> 300 </velocities>
    </initialize>

    <forces>
      <force forcefield='qtip4pf'> </force>
      <force forcefield='wall-1'> </force>
      <force forcefield='wall-2'> </force>
    </forces>

    <ensemble>
      <temperature units='kelvin'> 300 </temperature>
      <pressure units='pascal'> 0 </pressure>
    </ensemble>

    <motion mode='dynamics'>
      <dynamics mode='nve'>
          <barostat mode='flexible'>
            <thermostat mode='langevin'>
              <tau units='femtosecond'> 250 </tau>
            </thermostat>
            <tau units='femtosecond'> 250 </tau>
            <hfix > [offdiagonal,zz] </hfix>
          </barostat>
          <thermostat mode='pile_g'>
            <tau units='femtosecond'> 25 </tau>
          </thermostat>
          <timestep units='femtosecond'> 1 </timestep>
      </dynamics>
    </motion>

  </system>

</simulation>
